<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run a model of a StoX project — runModel • RstoxFramework</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run a model of a StoX project — runModel"><meta property="og:description" content="This function runs and returns output from a model of a StoX project."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RstoxFramework</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2.0-9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/StoXProject/RstoxFramework/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run a model of a StoX project</h1>
    <small class="dont-index">Source: <a href="https://github.com/StoXProject/RstoxFramework/blob/master/R/API.R" class="external-link"><code>R/API.R</code></a></small>
    <div class="hidden name"><code>runModel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function runs and returns output from a model of a StoX project.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">runModel</span><span class="op">(</span></span>
<span>  <span class="va">projectPath</span>,</span>
<span>  <span class="va">modelName</span>,</span>
<span>  processes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  startProcess <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  endProcess <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  drop.datatype <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  unlistDepth2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  run <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force.save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  force.restart <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  replaceDataList <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  replaceArgsList <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prependProcessList <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fileOutput <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  setUseProcessDataToTRUE <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  purge.processData <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  returnModelData <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  returnBootstrapData <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  selection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  BootstrapID <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  unlistSingleTable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  try <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  close <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-projectpath">projectPath<a class="anchor" aria-label="anchor" href="#arg-projectpath"></a></dt>
<dd><p>The path to the StoX project, i.e., the folder of the project with the sub folders "input", "output" and "process". Can possibly be the path to a file inside the project folder.</p></dd>


<dt id="arg-modelname">modelName<a class="anchor" aria-label="anchor" href="#arg-modelname"></a></dt>
<dd><p>The name of the model (possible values are "baseline", "analysis" and "report").</p></dd>


<dt id="arg-processes">processes<a class="anchor" aria-label="anchor" href="#arg-processes"></a></dt>
<dd><p>The name of the processes.</p></dd>


<dt id="arg-startprocess">startProcess<a class="anchor" aria-label="anchor" href="#arg-startprocess"></a></dt>
<dd><p>The process index, name or ID at which to start the model run.</p></dd>


<dt id="arg-endprocess">endProcess<a class="anchor" aria-label="anchor" href="#arg-endprocess"></a></dt>
<dd><p>The process index, name or ID at which to stop the model run.</p></dd>


<dt id="arg-drop-datatype">drop.datatype<a class="anchor" aria-label="anchor" href="#arg-drop-datatype"></a></dt>
<dd><p>Logical: If TRUE, drop the top level of the output list if it has length 1 and that single element is named by the datatype name.</p></dd>


<dt id="arg-unlistdepth-">unlistDepth2<a class="anchor" aria-label="anchor" href="#arg-unlistdepth-"></a></dt>
<dd><p>Logical: Related to <code>drop.datatype</code>, but setting this to TRUE unlists output data that are nested in 2 levels, such as output from <code><a href="https://rdrr.io/pkg/RstoxData/man/ReadBiotic.html" class="external-link">ReadBiotic</a></code>, which outputs a set of tables for each input file. Using unlistDepth2 = TRUE puts all these tables in one list, and uses the concatenation of the file names and the table name separated by underscore. This is how it is displayed in the StoX GUI when selecting "View output".</p></dd>


<dt id="arg-run">run<a class="anchor" aria-label="anchor" href="#arg-run"></a></dt>
<dd><p>Logical: If TRUE run the model.</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>Logical: If TRUE save the project after running.</p></dd>


<dt id="arg-force-save">force.save<a class="anchor" aria-label="anchor" href="#arg-force-save"></a></dt>
<dd><p>If no changes are made to the project, force save anyway. Overrides the <code>save</code> option.</p></dd>


<dt id="arg-force-restart">force.restart<a class="anchor" aria-label="anchor" href="#arg-force-restart"></a></dt>
<dd><p>Logical: If TRUE restart the model before running.</p></dd>


<dt id="arg-replacedatalist">replaceDataList<a class="anchor" aria-label="anchor" href="#arg-replacedatalist"></a></dt>
<dd><p>A list named by the processes to replace output data for. See <code><a href="runProcess.html">runProcess</a></code>.</p></dd>


<dt id="arg-replaceargslist">replaceArgsList<a class="anchor" aria-label="anchor" href="#arg-replaceargslist"></a></dt>
<dd><p>A list of <code>replaceArgs</code> (see <code><a href="runProcess.html">runProcess</a></code>) holding parameters to replace in the function call, named by the processes to modify.</p></dd>


<dt id="arg-prependprocesslist">prependProcessList<a class="anchor" aria-label="anchor" href="#arg-prependprocesslist"></a></dt>
<dd><p>A list of <code>values</code> used in <code><a href="prependProcess.html">prependProcess</a></code>, named by the processes to prepend a process to.</p></dd>


<dt id="arg-fileoutput">fileOutput<a class="anchor" aria-label="anchor" href="#arg-fileoutput"></a></dt>
<dd><p>Logical: If TRUE save the output as a text file (or other format specified by the class or attributes of the output). If NULL (defafult) use the corresponding parameter of the process.</p></dd>


<dt id="arg-setuseprocessdatatotrue">setUseProcessDataToTRUE<a class="anchor" aria-label="anchor" href="#arg-setuseprocessdatatotrue"></a></dt>
<dd><p>Logical: If TRUE set the UseProcessData function parameter to TRUE in the process memory after execution, if the process is a ProcessData process.</p></dd>


<dt id="arg-purge-processdata">purge.processData<a class="anchor" aria-label="anchor" href="#arg-purge-processdata"></a></dt>
<dd><p>Logical: If TRUE replace process data entirely.</p></dd>


<dt id="arg-returnmodeldata">returnModelData<a class="anchor" aria-label="anchor" href="#arg-returnmodeldata"></a></dt>
<dd><p>Logical: If TRUE return the output of the model runs. Can also be given as a string vector holding the names of the models to return data from. If TRUE, the specific models to return data from (across models) can be given by <code>processes</code>.</p></dd>


<dt id="arg-returnbootstrapdata">returnBootstrapData<a class="anchor" aria-label="anchor" href="#arg-returnbootstrapdata"></a></dt>
<dd><p>Logical: If TRUE read the content of any NetCDF4 files (i.e. output from <code><a href="Bootstrap.html">Bootstrap</a></code>).</p></dd>


<dt id="arg-selection">selection<a class="anchor" aria-label="anchor" href="#arg-selection"></a></dt>
<dd><p>Hierarchical list of names of the groups/variables. The last element must be a vector of the variables to return from the table specified by the other elements. E.g., list("ImputeSuperIndividuals", "SuperIndividualsData", c("Stratum", "IndividualAge", "Abundance")) will return a data.table of the three columns "Stratum", "IndividualAge" and "Abundance", added the BootstrapID specified in <code>BootstrapID</code>.</p></dd>


<dt id="arg-bootstrapid">BootstrapID<a class="anchor" aria-label="anchor" href="#arg-bootstrapid"></a></dt>
<dd><p>A sequence of bootstrap IDs, i.e., the indices of the bootstrap replicates. The default returns all bootstrap replicates.</p></dd>


<dt id="arg-unlistsingletable">unlistSingleTable<a class="anchor" aria-label="anchor" href="#arg-unlistsingletable"></a></dt>
<dd><p>Logical: For use when only single table process outputs are among the requested processes in <code>OutputProcesses</code> of <code><a href="Bootstrap.html">Bootstrap</a></code>. If FALSE (default) return a list named by the <code>selection</code> with a sub-list named by the datatype holding the output data  (e.g. $ImputeSuperIndividuals$SuperIndividualsData). If TRUE return a list named by the <code>selection</code> holding the output data, replicating the output of <code><a href="Bootstrap.html">Bootstrap</a></code> in StoX &lt;= 3.6.2.</p></dd>


<dt id="arg-try">try<a class="anchor" aria-label="anchor" href="#arg-try"></a></dt>
<dd><p>Logical: If FALSE do not run the process in a <code>tryCatch</code>. Set this to FALSE when debugging, as the <code>tryCatch</code> masks the errors in the <code>traceback</code>.</p></dd>


<dt id="arg-close">close<a class="anchor" aria-label="anchor" href="#arg-close"></a></dt>
<dd><p>Logical: If TRUE close the project after running and getting the output.</p></dd>


<dt id="arg-msg">msg<a class="anchor" aria-label="anchor" href="#arg-msg"></a></dt>
<dd><p>Logical: If FALSE no messages are printed to console (except possibly for extremely important ones).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="runProcesses.html">runProcesses</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list of model output.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Open and run the sandeel test project:</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sandeelZip</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testresources"</span>, <span class="st">"sandeel_20.zip"</span>, package <span class="op">=</span> <span class="st">"RstoxFramework"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="va">sandeelZip</span>, exdir <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">projectPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"sandeel_20"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu">runModel</span><span class="op">(</span><span class="va">projectPath</span>, modelName <span class="op">=</span> <span class="st">"baseline"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define depth dependent acoustic target strength, and rerun:</span></span></span>
<span class="r-in"><span><span class="va">process</span> <span class="op">&lt;-</span> <span class="fu"><a href="getProcess.html">getProcess</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  projectPath <span class="op">=</span> <span class="va">projectPath</span>, </span></span>
<span class="r-in"><span>  modelName <span class="op">=</span> <span class="st">"baseline"</span>, </span></span>
<span class="r-in"><span>  processName <span class="op">=</span> <span class="st">"DefineAcousticTargetStrength"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">newAcousticTargetStrengthTable</span> <span class="op">&lt;-</span> <span class="va">process</span><span class="op">$</span><span class="va">functionParameters</span><span class="op">$</span><span class="va">AcousticTargetStrengthTable</span></span></span>
<span class="r-in"><span><span class="co"># Add the depth dependence:</span></span></span>
<span class="r-in"><span><span class="va">newAcousticTargetStrengthTable</span><span class="op">$</span><span class="va">DepthExponent</span> <span class="op">=</span> <span class="op">-</span><span class="fl">2.3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">replaceArgsList</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  DefineAcousticTargetStrength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    UseProcessData <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># Needed to override the existing process data</span></span></span>
<span class="r-in"><span>    AcousticTargetStrengthModel <span class="op">=</span> <span class="st">"LengthAndDepthDependent"</span>, </span></span>
<span class="r-in"><span>    AcousticTargetStrengthTable <span class="op">=</span> <span class="va">newAcousticTargetStrengthTable</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu">RstoxFramework</span><span class="fu">::</span><span class="fu">runModel</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">projectPath</span>, </span></span>
<span class="r-in"><span>  modelName <span class="op">=</span> <span class="st">"baseline"</span>, </span></span>
<span class="r-in"><span>  replaceArgsList <span class="op">=</span> <span class="va">replaceArgsList</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show the change in the output:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The difference is larger at larger depths:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">d1</span><span class="op">$</span><span class="va">Abundance</span><span class="op">$</span><span class="va">Data</span><span class="op">$</span><span class="va">MinLayerDepth</span>, </span></span>
<span class="r-in"><span>  <span class="va">d1</span><span class="op">$</span><span class="va">Abundance</span><span class="op">$</span><span class="va">Data</span><span class="op">$</span><span class="va">Abundance</span>  <span class="op">/</span>  <span class="va">d2</span><span class="op">$</span><span class="va">Abundance</span><span class="op">$</span><span class="va">Data</span><span class="op">$</span><span class="va">Abundance</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Arne Johannes Holmin, Anthony Hennessey, Espen Johnsen, Sindre Vatnehol, Edvin Fuglebakk, Ibrahim Umar, Aasmund Skaalevik, Esmael Musema Hassen, Atle Totland, Mikko Juhani Vihtakari, Norwegian Institute of Marine Research.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

